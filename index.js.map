{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst URL = 'https://pixabay.com/api/';\nconst API_KEY = '45767028-18ffee8ca72084a8354af7c89';\n\nexport default function searchImagesByQuery(query, page = 1) {\n  return axios\n    .get(URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 15,\n      },\n    })\n    .then(response => response.data)\n    .catch(error => {\n      iziToast.error({\n        position: 'topRight',\n        message: `Failed to fetch images: ${error.message}`,\n      });\n    });\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function createImages(data) {\n  const lightbox = new SimpleLightbox('.gallery-list a', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  const list = document.querySelector('.gallery-list');\n  let images = data.hits\n    .map(\n      hit =>\n        `<div class=\"gallery-item\"><a href=\"${hit.largeImageURL}\"><img class=\"image\" src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" /></a><div class =\"text-wraper\"><div class=\"text-block\"><h2>Likes</h2><p>${hit.likes}</p></div><div class=\"text-block\"><h2>Views</h2><p>${hit.views}</p></div><div class=\"text-block\"><h2>Comments</h2><p>${hit.comments}</p></div><div class=\"text-block\"><h2>Downloads</h2><p>${hit.downloads}</p></div></div></div>`\n    )\n    .join('');\n  list.insertAdjacentHTML('afterbegin', images);\n  lightbox.refresh();\n}\n\nexport function clearImages() {\n  const list = document.querySelector('.gallery-list');\n  list.innerHTML = '';\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport searchImagesByQuery from './js/pixabay-api';\nimport { createImages, clearImages } from './js/render-functions';\n\nconst form = document.querySelector('.search-form');\nconst input = document.querySelector('.search-input');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst gallery = new SimpleLightbox('.gallery a');\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\n\nform.addEventListener('submit', handleSubmit);\nloadMoreBtn.addEventListener('click', handleLoadMore);\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n  clearImages();\n  loader.classList.remove('hidden');\n  loadMoreBtn.classList.add('hidden');\n  currentQuery = input.value.trim();\n  currentPage = 1;\n  if (currentQuery === '') {\n    iziToast.error({\n      position: 'topRight',\n      message: 'Please fill the input',\n    });\n    loader.classList.add('hidden');\n    return;\n  }\n\n  try {\n    const data = await searchImagesByQuery(currentQuery, currentPage);\n    totalHits = data.totalHits;\n    if (data.total === 0) {\n      iziToast.error({\n        position: 'topRight',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    } else {\n      createImages(data);\n      gallery.refresh();\n      if (data.hits.length === 15) {\n        loadMoreBtn.classList.remove('hidden');\n      }\n    }\n  } catch (error) {\n    iziToast.error({\n      position: 'topRight',\n      message: 'Failed to fetch images. Please try again later.',\n    });\n  } finally {\n    loader.classList.add('hidden');\n    form.reset();\n  }\n}\n\nasync function handleLoadMore(event) {\n  currentPage += 1;\n  loader.classList.remove('hidden');\n\n  try {\n    const data = await searchImagesByQuery(currentQuery, currentPage);\n    if (data.hits.length === 0 || currentPage * 15 >= totalHits) {\n      iziToast.info({\n        position: 'topRight',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n\n      loadMoreBtn.classList.add('hidden');\n    } else {\n      createImages(data);\n      gallery.refresh();\n      if (data.hits.length < 15) {\n        loadMoreBtn.classList.add('hidden');\n      } else {\n        loadMoreBtn.classList.remove('hidden');\n      }\n      smoothScroll();\n    }\n  } catch (error) {\n    iziToast.error({\n      position: 'topRight',\n      message: 'Failed to fetch images. Please try again later.',\n    });\n  } finally {\n    loader.classList.add('hidden');\n  }\n}\n\nfunction smoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nsetTimeout(() => {\n  loader.classList.add('hidden');\n}, 100);\n"],"names":["URL","API_KEY","searchImagesByQuery","query","page","axios","response","error","createImages","data","lightbox","SimpleLightbox","list","images","hit","clearImages","form","input","loader","loadMoreBtn","gallery","currentPage","currentQuery","totalHits","handleSubmit","handleLoadMore","event","iziToast","smoothScroll","cardHeight"],"mappings":"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"}